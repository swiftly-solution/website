---
title: IUnmanagedFunction
---

# Interface IUnmanagedFunction

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L3" />

**Namespace**: [SwiftlyS2.Shared.Memory](/docs/api/memory)

**Assembly**: SwiftlyS2.CS2.dll

```csharp
public interface IUnmanagedFunction<TDelegate> where TDelegate : Delegate
```

<ApiLabel>Type Parameters</ApiLabel>

- <ApiParam name="TDelegate" />

## Properties

### Address

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L8" />

The address of the unmanaged function.

```csharp
nint Address { get; }
```

<ApiLabel>Property Value</ApiLabel>

- <ApiParam type="nint" typeHref="https://learn.microsoft.com/dotnet/api/system.intptr" />

### Call

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L21" />

The delegate that directly call to the address.
Might be hooked by other plugins or core.

```csharp
TDelegate Call { get; }
```

<ApiLabel>Property Value</ApiLabel>

- <ApiParam type="TDelegate" />

### CallOriginal

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L15" />

The unhooked original function delegate.
Call this if you don't want your invocation to be hooked.

```csharp
TDelegate CallOriginal { get; }
```

<ApiLabel>Property Value</ApiLabel>

- <ApiParam type="TDelegate" />

## Methods

### AddHook(Func\<Func\<TDelegate\>, TDelegate\>)

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L31" />

Hook a native function at the specified address with a managed callback.
The <code class="paramref">callbackBuilder</code> receives the pointer to the "next" function in the chain
(previous callback if any, or the original function pointer if this is the first callback),
and must return a delegate matching the native function signature with proper calling convention.

```csharp
Guid AddHook(Func<Func<TDelegate>, TDelegate> callbackBuilder)
```

<ApiLabel>Parameters</ApiLabel>

- <ApiParam name="callbackBuilder" type="Func&lt;Func&lt;TDelegate&gt;, TDelegate&gt;" typeHref="https://learn.microsoft.com/dotnet/api/system.func-2" /> — Builder that receives the next function pointer and returns the managed callback.

<ApiLabel>Returns</ApiLabel>

- <ApiParam type="Guid" typeHref="https://learn.microsoft.com/dotnet/api/system.guid" /> — a guid for the hook.

### RemoveHook(Guid)

<ViewSource href="https://github.com/swiftly-solution/swiftlys2/blob/master/managed/src/SwiftlyS2.Shared/Modules/Memory/IUnmanagedFunction.cs#L37" />

Unhook a hook by its id.

```csharp
void RemoveHook(Guid id)
```

<ApiLabel>Parameters</ApiLabel>

- <ApiParam name="id" type="Guid" typeHref="https://learn.microsoft.com/dotnet/api/system.guid" /> — The id of the hook to unhook.

