---
title: Menus
---

SwiftlyS2 provides a powerful menu system that allows you to create interactive menus for players. The system uses a fluent builder API for easy menu creation and customization.

## Creating a Menu

Use `Core.Menus.CreateMenu` to create a new menu instance, then use the builder to configure it.

```csharp
var menu = Core.Menus.CreateMenu("Menu Title");
menu.Builder
    .HasSound(true)
    .ForceFreeze()
    .AddButton("Click me", player => {
        player.PrintToChat("Button clicked!");
    });

// Open the menu for a player
menu.Show(player);
```

## Menu Builder API

The menu builder provides a fluent API for configuring menus. All builder methods return the builder instance, allowing you to chain multiple calls.

### Basic Configuration

```csharp
var menu = Core.Menus.CreateMenu("Settings");
menu.Builder
    .HasSound(true)           // Enable sound effects
    .ForceFreeze()            // Freeze player while menu is open
    .AutoClose(10.0f)         // Auto-close after 10 seconds
    .CloseOnSelect();         // Close menu when any option is selected

// Design configuration (new API)
menu.Builder.Design
    .MaxVisibleItems(7)       // Set max visible items per page
    .SetColor(new Color(255, 255, 255, 255))  // Set menu color
    .SetVerticalScrollStyle(MenuVerticalScrollStyle.Arrows);  // Customize scroll style
```

### Menu Options

#### Button Option

A simple button that executes a callback when selected.

```csharp
menu.Builder
    .AddButton("Click me", player => {
        player.PrintToChat("Button clicked!");
    })
    .AddButton("With option param", (player, option) => {
        player.PrintToChat($"Selected: {option.Text}");
    });
```

#### Toggle Option

A boolean toggle that switches between on/off states.

```csharp
menu.Builder
    .AddToggle("Enable Feature", defaultValue: true, (player, enabled) => {
        player.PrintToChat($"Feature is now {(enabled ? "enabled" : "disabled")}");
    })
    .AddToggle("With option param", false, (player, option, enabled) => {
        player.PrintToChat($"{option.Text}: {enabled}");
    });
```

#### Slider Option

A slider that allows selecting numeric values within a range.

```csharp
menu.Builder
    .AddSlider("Volume", min: 0, max: 100, defaultValue: 50, step: 5, (player, value) => {
        player.PrintToChat($"Volume set to: {value}");
    })
    .AddSlider("Sensitivity", 0.1f, 5.0f, 1.0f, 0.1f, (player, option, value) => {
        player.PrintToChat($"{option.Text}: {value}");
    });
```

#### Choice Option

A choice option that cycles through predefined string values.

```csharp
string[] difficulties = { "Easy", "Medium", "Hard", "Expert" };

menu.Builder
    .AddChoice("Difficulty", difficulties, defaultChoice: "Medium", (player, choice) => {
        player.PrintToChat($"Difficulty set to: {choice}");
    })
    .AddChoice("Mode", new[] { "Casual", "Competitive" }, "Casual", (player, option, choice) => {
        player.PrintToChat($"{option.Text}: {choice}");
    });
```

#### Text Option

Display non-interactive text in the menu.

```csharp
menu.Builder
    .AddText("Welcome to the settings menu!", ITextAlign.Center, IMenuTextSize.Large)
    .AddText("Configure your preferences below", ITextAlign.Left, IMenuTextSize.Small);
```

#### Separator

Add a visual separator between menu sections.

```csharp
menu.Builder
    .AddButton("Option 1", player => { })
    .AddButton("Option 2", player => { })
    .AddSeparator()
    .AddButton("Option 3", player => { });
```

#### Progress Bar

Display a progress bar that updates dynamically.

```csharp
float progress = 0.0f;

menu.Builder
    .AddProgressBar("Loading", () => progress, barWidth: 20)
    .AddProgressBar("Health", () => player.Controller.PlayerPawn.Health / 100f, 15);
```

### Submenus

Create hierarchical menus with submenus.

```csharp
// Create a submenu
var submenu = Core.Menus.CreateMenu("Submenu")
submenu.Builder
    .AddButton("Back", player => menu.Show(player))
    .AddButton("Submenu option", player => {
        player.PrintToChat("Submenu option selected!");
    });

// Add submenu to main menu
menu.Builder
    .AddSubmenu("Open Submenu", submenu)
    .AddSubmenu("Lazy Submenu", () => {
        // Submenu is created when accessed
        return Core.Menus.CreateMenu("Lazy Menu");
    });
```

### Async Buttons

Execute async operations from menu buttons.

```csharp
menu.Builder
    .AddAsyncButton("Load Data", async player => {
        player.PrintToChat("Loading...");
        await Task.Delay(1000);
        player.PrintToChat("Data loaded!");
    })
    .AddAsyncButton("Save Data", async (player, option) => {
        await SavePlayerDataAsync(player);
        player.PrintToChat("Data saved!");
    });
```

### Conditional Visibility and Enablement

Control when options are visible or enabled.

```csharp
menu.Builder
    .AddButton("Admin Only", player => {
        player.PrintToChat("Admin action!");
    })
    .VisibleWhen(player => Core.Permission.PlayerHasPermission(player.SteamID, "admin"))
    .EnabledWhen(player => player.Controller.PlayerPawn.Health > 0);
```

### Button Overrides

Customize which buttons control menu interactions using the Design API.

```csharp
menu.Builder.Design
    .OverrideSelectButton("attack", "attack2")     // Use attack buttons for selection
    .OverrideMoveButton("forward", "back")         // Use movement buttons for navigation
    .OverrideExitButton("duck");                   // Use duck button to exit
```

### Text Sizing and Overflow

Control the size of menu text and how overflow is handled.

```csharp
menu.Builder
    .AddText("Extra Small", size: IMenuTextSize.ExtraSmall)
    .AddText("Small", size: IMenuTextSize.Small)
    .AddText("Medium", size: IMenuTextSize.Medium)          // Default
    .AddText("Large", size: IMenuTextSize.Large)
    .AddText("Extra Large", size: IMenuTextSize.ExtraLarge);

// Control text overflow behavior with MenuHorizontalStyle
menu.Builder
    .AddButton("Long text that might overflow", player => { },
        overflowStyle: MenuHorizontalStyle.Truncate)
    .AddButton("Another long text", player => { },
        overflowStyle: MenuHorizontalStyle.Scroll);

// Set global horizontal style for all menu items
menu.Builder.Design.SetGlobalHorizontalStyle(MenuHorizontalStyle.Wrap);
```

## Menu Management

### Opening and Closing Menus

```csharp
// Open a menu
menu.Show(player);
Core.Menus.OpenMenu(player, menu);

// Close a menu
menu.Close(player);
Core.Menus.CloseMenuForPlayer(player);
Core.Menus.CloseMenu(menu);
Core.Menus.CloseMenuByTitle("Settings", exact: true);

// Check if menu is open
bool isOpen = Core.Menus.HasMenuOpen(player);

// Get current menu
IMenu? currentMenu = Core.Menus.GetMenu(player);
```

### Menu Events

Subscribe to menu events to track interactions.

```csharp
// Global events
Core.Menus.OnMenuOpened += (player, menu) => {
    Console.WriteLine($"Menu '{menu.Title}' opened for {player.Controller.PlayerName}");
};

Core.Menus.OnMenuClosed += (player, menu) => {
    Console.WriteLine($"Menu '{menu.Title}' closed for {player.Controller.PlayerName}");
};

Core.Menus.OnMenuRendered += (player, menu) => {
    Console.WriteLine($"Menu '{menu.Title}' rendered for {player.Controller.PlayerName}");
};

// Per-menu events
menu.OnOpen += player => {
    player.PrintToChat("Menu opened!");
};

menu.OnClose += player => {
    player.PrintToChat("Menu closed!");
};

menu.OnMove += player => {
    // Player moved selection
};

menu.OnItemSelected += (player, option) => {
    Console.WriteLine($"Player selected: {option.Text}");
};

menu.OnItemHovered += (player, option) => {
    // Player hovered over an option
};

menu.BeforeRender += player => {
    // Before menu is rendered
};

menu.AfterRender += player => {
    // After menu is rendered
};
```


## Advanced Features

### Parent Menus

Set a parent menu to create a navigation hierarchy.

```csharp
var mainMenu = Core.Menus.CreateMenu("Main Menu");
var subMenu = Core.Menus.CreateMenu("Sub Menu")
    .Builder
    .WithParent(mainMenu);

// Now the submenu knows its parent
```

### Dynamic Menu Content

Rerender menus to update dynamic content.

```csharp
var dynamicMenu = Core.Menus.CreateMenu("Player List")
    .Builder
    .AddText("Online Players:", ITextAlign.Center);

foreach (var p in Core.PlayerManager.GetPlayers())
{
    dynamicMenu.Builder.AddButton(p.Controller.PlayerName, player => {
        player.PrintToChat($"Selected: {p.Controller.PlayerName}");
    });
}

// Update menu content
Core.Scheduler.Repeat(1000, () => {
    // Rebuild menu with updated player list
    dynamicMenu.Rerender(player);
});
```

### Freeze Control

Control player freeze state independently.

```csharp
// Freeze/unfreeze player
menu.SetFreezeState(player, freeze: true);

// Use NoFreeze() to prevent freezing
var noFreezeMenu = Core.Menus.CreateMenu("No Freeze Menu")
    .Builder
    .NoFreeze();
```

### Menu Design API

The new `Design` API provides a cleaner way to customize menu appearance and behavior. Access it via `menu.Builder.Design`.

```csharp
var menu = Core.Menus.CreateMenu("Styled Menu");

// Configure design settings
menu.Builder.Design
    .MaxVisibleItems(10)                                    // Maximum items shown at once
    .SetColor(new Color(100, 200, 255, 255))               // Menu tint color
    .SetVerticalScrollStyle(MenuVerticalScrollStyle.Arrows) // Scroll indicators
    .SetGlobalHorizontalStyle(MenuHorizontalStyle.Wrap)    // Text overflow behavior
    .OverrideSelectButton("attack")                         // Custom button mappings
    .OverrideMoveButton("forward", "back")
    .OverrideExitButton("use");

// Available MenuHorizontalStyle options:
// - Truncate: Cut off text that's too long
// - Scroll: Horizontally scroll long text
// - Wrap: Wrap text to multiple lines

// Available MenuVerticalScrollStyle options:
// - Arrows: Show up/down arrows for scrolling
// - PageNumbers: Show current page number
// - None: No scroll indicators
```

### Per-Item Overflow Styles

Each menu item can have its own overflow style, overriding the global setting.

```csharp
menu.Builder
    .AddButton("Short", player => { })
    .AddButton("This is a very long button text that needs special handling",
        player => { },
        overflowStyle: MenuHorizontalStyle.Scroll)
    .AddToggle("Long toggle text example", false, null,
        overflowStyle: MenuHorizontalStyle.Truncate)
    .AddSlider("Volume", 0, 100, 50, 5, null,
        overflowStyle: MenuHorizontalStyle.Wrap);
```

## Reference

See the following API documentation for more details:

### Core Interfaces
- [IMenuManager](/docs/api/shared/menus/imenumanager) - Menu manager interface
- [IMenu](/docs/api/shared/menus/imenu) - Menu interface
- [IMenuBuilder](/docs/api/shared/menus/imenubuilder) - Menu builder interface
- [IMenuDesign](/docs/api/shared/menus/imenudesign) - Menu design configuration interface (new!)
- [IOption](/docs/api/shared/menus/ioption) - Menu option interface

### Styling and Configuration
- [MenuHorizontalStyle](/docs/api/shared/menus/menuhorizontalstyle) - Text overflow styles (Truncate, Scroll, Wrap)
- [MenuVerticalScrollStyle](/docs/api/shared/menus/menuverticalscrollstyle) - Vertical scroll indicators
- [IMenuTextSize](/docs/api/shared/menus/imenutextsize) - Text size enum
- [ITextAlign](/docs/api/shared/menus/itextalign) - Text alignment enum
- [IMenuButtonOverrides](/docs/api/shared/menus/imenubuttonoverrides) - Custom button mappings
- [MenuSettings](/docs/api/shared/menus/menusettings) - Global menu settings